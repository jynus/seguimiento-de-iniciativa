:root{
  --bg:#0f1115; --panel:#151923; --muted:#7b8191; --text:#e7eaf0; --line:#23293a;
  --accent:#54a3ff; --accent-2:#70e089; --danger:#ff6b6b;
}
html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font:12px/1.25 system-ui,Segoe UI,Roboto,Arial,sans-serif;}
.wrap{padding:6px}
.card{background:var(--panel);border:1px solid var(--line);border-radius:10px;box-shadow:0 6px 22px rgba(0,0,0,.18);overflow:hidden}
.head{display:flex;align-items:center;gap:8px;padding:6px 8px;border-bottom:1px solid var(--line)}
.head h1{font-size:12px;margin:0;color:var(--muted);font-weight:600;letter-spacing:.2px}
.head .sp{flex:1}

.btn{border:1px solid var(--line);background:#0e1220;border-radius:7px;padding:3px 8px;color:var(--text);cursor:pointer}
.btn:hover{border-color:#2b3147}
.btn.danger{border-color:#543; background:#2a0f12}

table{width:100%;border-collapse:collapse;}
thead th{
  position:sticky;top:0;background:rgba(21,25,35,.9);
  backdrop-filter:saturate(140%) blur(4px);font-weight:600;color:#b8becc;
  padding:5px 6px
}
th,td{
  border-bottom:1px dashed var(--line);
  padding:6px 6px;vertical-align:middle;
  overflow:visible;text-overflow:clip;white-space:nowrap
}

th.nm, td.nm {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Anchuras */
col.ini{width:42px}
col.cn{width:42px}
col.ca{width:42px}
col.pv{width:85px}
col.act{width:90px}
col.mv{width:30px}
col.tools{width:200px}

/* avatar */
.avatar{width:26px;height:26px;border-radius:50%;display:inline-block;overflow:hidden;border:1px solid #2a3147;box-shadow:0 1px 0 rgba(255,255,255,.04) inset}
.avatar img{display:block;width:100%;height:100%;object-fit:cover}
/* Borde según facción (solo monstruos) */
.avatar { border-width: 2px; }
.avatar.enemigo { border-color: #ef4444 !important; box-shadow: 0 0 0 1px rgba(239,68,68,.25); }
.avatar.neutral { border-color: #9aa3b2 !important; box-shadow: 0 0 0 1px rgba(154,163,178,.25); }
.avatar.aliado  { border-color: #10b981 !important; box-shadow: 0 0 0 1px rgba(16,185,129,.25); }


/* chips */
.chips{display:flex;gap:4px;flex-wrap:wrap}
.chip{padding:2px 6px;border-radius:999px;font-size:11px;line-height:1;border:1px solid rgba(255,255,255,.12);user-select:none}

/* toggles */
.pill{
  min-width:60px;height:18px;padding:0 8px;border-radius:6px;border:1px solid #2a3147;
  display:inline-flex;align-items:center;justify-content:center;user-select:none
}
.pill.on{background:color-mix(in oklab, var(--accent) 24%, transparent);border-color:color-mix(in oklab, var(--accent) 60%, transparent);color:#dff0ff}
.pill.off{background:#0c1020;color:#a9b0c3}

/* Grupo Acciones (A/B/R compactas) */
.actg{display:inline-flex;gap:4px}
.pill.min{min-width:22px;padding:0 4px;font-weight:700}

/* movimiento */
.mv{display:inline-flex;align-items:left;gap:4px;font-variant-numeric:tabular-nums}
/* .mv .pair{min-width:20px;text-align:right} */
td .mv {
  display: inline-flex;       /* coloca cur / max / "m" en línea compacta */
  align-items: center;
  gap: 4px;                   /* separación mínima */
  white-space: nowrap;        /* evita saltos de línea */
}

td .mv input[type="number"] {
  width: 30px;               /* cabe 12.5 sin sobrar mucho */
  min-width: 0;
  padding: 2px 4px;
  box-sizing: border-box;
}
/* inputs admin */
input[type="text"], input[type="number"]{
  width:24px;background:#0e1220;color:var(--text);border:1px solid var(--line);border-radius:6px;padding:2px 4px
}
input.small{width:24px}

/* estado fila */
tbody tr.active{outline:2px solid var(--accent-2);outline-offset:-2px;background:linear-gradient(90deg, rgba(112,224,137,.12), transparent)}
tbody tr:hover{background:rgba(255,255,255,.03)}

.muted{color:#9aa3b2}

/* Remove number spinners (Chrome/Edge/Opera) */
input[type="number"].no-spin::-webkit-outer-spin-button,
input[type="number"].no-spin::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
/* Remove number spinners (Firefox) */
input[type="number"].no-spin {
  -moz-appearance: textfield;
  appearance: textfield;
}
/* Optional: visual cue on focus (keeps your existing styling) */
input[type="number"].no-spin:focus {
  outline: 1px solid var(--accent);
  outline-offset: 2px;
}

/* Row that is hidden for clients (admin still sees it) */
tbody tr.hidden-for-clients{
  background: rgba(160, 170, 185, .18);
}

/* tiny emoji buttons look better slightly tighter */
.btn.emoji{ padding: 2px 6px; font-size: 14px; line-height: 1; }

/* Popover para ajustar PV (aparece bajo PV cur) */
.hp-popover {
  position: absolute;
  z-index: 9999;
  min-width: 160px;
  max-width: 220px;
  padding: 8px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,.15);
  background: rgba(20, 24, 32, .95);
  box-shadow: 0 8px 24px rgba(0,0,0,.35);
  backdrop-filter: blur(6px);
}
.hp-popover .btn { width: 100%; margin: 4px 0; }
.hp-popover input[type="number"] {
  width: 100%;
  min-width: 0;
  text-align: center;
  padding: 4px 6px;
  box-sizing: border-box;
}

/* Estilos específicos del popover de PV */
.hp-popover .btn.dmg {
  background: #7f1d1d;
  border-color: #b91c1c;
  color: #fff;
}
.hp-popover .btn.dmg:hover { background: #991b1b; }

.hp-popover .btn.heal {
  background: #064e3b;
  border-color: #10b981;
  color: #fff;
}
.hp-popover .btn.heal:hover { background: #065f46; }

/* Columna y asa de arrastre */
col.drag { width: 16px; }
td.drag  { padding: 0 2px; }

.drag-handle{
  display: flex;
  align-items: center;
  justify-content: center;
  width: 12px;
  height: 100%;
  user-select: none;
  cursor: grab;            /* cursor para mover */
  opacity: .55;
  color: #b8becc;          /* color de los puntitos ⋮ */
}
.drag-handle:hover{ opacity: .95; }
tbody tr.dragging .drag-handle{ cursor: grabbing; }

/* Feedback de destino */
tbody tr.drop-before { box-shadow: inset 0 2px 0 var(--accent-2); }
tbody tr.drop-after  { box-shadow: inset 0 -2px 0 var(--accent-2); }
